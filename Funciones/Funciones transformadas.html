<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformaciones de Funciones - Pr√°ctica Interactiva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .info-box {
            background: #f0f4ff;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 10px;
        }

        .info-box h2 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .starting-point {
            font-size: 1.2em;
            font-weight: bold;
            color: #764ba2;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #fff3cd;
            border-radius: 10px;
        }

        .problem-container {
            background: #fff;
            border: 3px solid #667eea;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .transformation {
            font-size: 1.5em;
            color: #764ba2;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 10px;
        }

        .procedure {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #4caf50;
            display: none; /* OCULTO HASTA RESPONDER */
        }

        .procedure.show {
            display: block;
        }

        .procedure h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }

        .step {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            font-size: 1.1em;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .option-btn {
            padding: 20px;
            font-size: 1.2em;
            font-weight: bold;
            border: 3px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .option-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .option-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.1em;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #c8e6c9;
            border: 3px solid #4caf50;
            color: #1b5e20;
        }

        .feedback.incorrect {
            background: #ffcdd2;
            border: 3px solid #f44336;
            color: #b71c1c;
        }

        .next-btn {
            display: block;
            margin: 30px auto 0;
            padding: 15px 40px;
            font-size: 1.2em;
            background: #764ba2;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .next-btn:hover {
            background: #5a3880;
            transform: scale(1.05);
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .explanation-toggle {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .explanation-toggle:hover {
            background: #ffe082;
        }

        .explanation-content {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px dashed #ffc107;
        }

        .explanation-content.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Transformaciones de Funciones</h1>
        <p class="subtitle">Pr√°ctica interactiva con autocorrecci√≥n</p>

        <div class="info-box">
            <h2>üìå Informaci√≥n importante</h2>
            <p><strong>Las transformaciones se dividen en dos tipos:</strong></p>
            <p><strong>Tipo I:</strong> Afectan a <em>y</em> (fuera de f): f(x) + a, a¬∑f(x), -f(x)</p>
            <p><strong>Tipo II:</strong> Afectan a <em>x</em> (dentro de f): f(x + a), f(x - a), f(-x)</p>
        </div>

        <div id="problemArea"></div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="correctCount">0</div>
                <div class="stat-label">Correctas</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="incorrectCount">0</div>
                <div class="stat-label">Incorrectas</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalCount">0</div>
                <div class="stat-label">Total</div>
            </div>
        </div>
    </div>

    <script>
        const problems = [
            {
                startPoint: { x: -2, y: 5 },
                transformation: "f(x) + 3",
                type: "I",
                procedure: [
                    "Esto es una transformaci√≥n TIPO I (afecta a y)",
                    "Paso 1: Identificar el valor inicial ‚Üí f(-2) = 5",
                    "Paso 2: Aplicar la transformaci√≥n ‚Üí f(x) + 3",
                    "Paso 3: Sumar 3 al valor de y ‚Üí 5 + 3 = 8",
                    "Paso 4: La x NO cambia ‚Üí x = -2",
                    "Resultado: (-2, 8)"
                ],
                correctAnswer: "(-2, 8)",
                options: ["(-2, 8)", "(-5, 5)", "(1, 5)"],
                explanation: "Las transformaciones de tipo f(x) + a solo afectan al valor de y, sum√°ndole la constante a. La coordenada x permanece sin cambios."
            },
            {
                startPoint: { x: 3, y: -4 },
                transformation: "-2f(x) + 1",
                type: "I",
                procedure: [
                    "Esto es una transformaci√≥n TIPO I (afecta a y)",
                    "Paso 1: Identificar el valor inicial ‚Üí f(3) = -4",
                    "Paso 2: Multiplicar por -2 ‚Üí -2 ¬∑ (-4) = 8",
                    "Paso 3: Sumar 1 ‚Üí 8 + 1 = 9",
                    "Paso 4: La x NO cambia ‚Üí x = 3",
                    "Resultado: (3, 9)"
                ],
                correctAnswer: "(3, 9)",
                options: ["(3, 9)", "(-6, 9)", "(3, 7)"],
                explanation: "Primero multiplicamos el valor de y por -2, luego sumamos 1. Todo afecta solo a y."
            },
            {
                startPoint: { x: -2, y: 5 },
                transformation: "f(x + 4)",
                type: "II",
                procedure: [
                    "Esto es una transformaci√≥n TIPO II (afecta a x)",
                    "Paso 1: Necesitamos que x + 4 = -2",
                    "Paso 2: Resolver para x ‚Üí x = -2 - 4 = -6",
                    "Paso 3: La y NO cambia ‚Üí y = 5",
                    "Resultado: (-6, 5)"
                ],
                correctAnswer: "(-6, 5)",
                options: ["(-6, 5)", "(2, 5)", "(-2, 9)"],
                explanation: "Para f(x + 4), debemos encontrar qu√© x hace que x + 4 = -2. Resolviendo: x = -6."
            },
            {
                startPoint: { x: 1, y: 7 },
                transformation: "f(x - 3)",
                type: "II",
                procedure: [
                    "Esto es una transformaci√≥n TIPO II (afecta a x)",
                    "Paso 1: Necesitamos que x - 3 = 1",
                    "Paso 2: Resolver para x ‚Üí x = 1 + 3 = 4",
                    "Paso 3: La y NO cambia ‚Üí y = 7",
                    "Resultado: (4, 7)"
                ],
                correctAnswer: "(4, 7)",
                options: ["(4, 7)", "(-2, 7)", "(1, 4)"],
                explanation: "Para f(x - 3), necesitamos x - 3 = 1, entonces x = 4. El desplazamiento horizontal es OPUESTO al signo dentro del par√©ntesis."
            },
            {
                startPoint: { x: -3, y: 2 },
                transformation: "3f(x) - 5",
                type: "I",
                procedure: [
                    "Esto es una transformaci√≥n TIPO I (afecta a y)",
                    "Paso 1: Identificar el valor inicial ‚Üí f(-3) = 2",
                    "Paso 2: Multiplicar por 3 ‚Üí 3 ¬∑ 2 = 6",
                    "Paso 3: Restar 5 ‚Üí 6 - 5 = 1",
                    "Paso 4: La x NO cambia ‚Üí x = -3",
                    "Resultado: (-3, 1)"
                ],
                correctAnswer: "(-3, 1)",
                options: ["(-3, 1)", "(-9, 1)", "(-3, -3)"],
                explanation: "Primero multiplicamos y por 3, luego restamos 5. Las operaciones fuera de f(x) afectan solo al valor de y."
            },
            {
                startPoint: { x: 4, y: -3 },
                transformation: "f(-x)",
                type: "II",
                procedure: [
                    "Esto es una transformaci√≥n TIPO II (afecta a x)",
                    "Paso 1: Necesitamos que -x = 4",
                    "Paso 2: Resolver para x ‚Üí x = -4",
                    "Paso 3: La y NO cambia ‚Üí y = -3",
                    "Resultado: (-4, -3)"
                ],
                correctAnswer: "(-4, -3)",
                options: ["(-4, -3)", "(4, 3)", "(-4, 3)"],
                explanation: "f(-x) es una reflexi√≥n sobre el eje y. Si el punto original tiene x = 4, el transformado tiene x = -4."
            },
            {
                startPoint: { x: -1, y: 6 },
                transformation: "-f(x)",
                type: "I",
                procedure: [
                    "Esto es una transformaci√≥n TIPO I (afecta a y)",
                    "Paso 1: Identificar el valor inicial ‚Üí f(-1) = 6",
                    "Paso 2: Cambiar el signo de y ‚Üí -6",
                    "Paso 3: La x NO cambia ‚Üí x = -1",
                    "Resultado: (-1, -6)"
                ],
                correctAnswer: "(-1, -6)",
                options: ["(-1, -6)", "(1, 6)", "(1, -6)"],
                explanation: "-f(x) refleja el punto sobre el eje x, cambiando solo el signo de y."
            },
            {
                startPoint: { x: 5, y: 8 },
                transformation: "f(x) / 2 - 3",
                type: "I",
                procedure: [
                    "Esto es una transformaci√≥n TIPO I (afecta a y)",
                    "Paso 1: Identificar el valor inicial ‚Üí f(5) = 8",
                    "Paso 2: Dividir por 2 ‚Üí 8 / 2 = 4",
                    "Paso 3: Restar 3 ‚Üí 4 - 3 = 1",
                    "Paso 4: La x NO cambia ‚Üí x = 5",
                    "Resultado: (5, 1)"
                ],
                correctAnswer: "(5, 1)",
                options: ["(5, 1)", "(2.5, 1)", "(5, 5)"],
                explanation: "Dividimos y por 2 y luego restamos 3. Todas las operaciones afectan solo a y."
            },
            {
                startPoint: { x: -4, y: 3 },
                transformation: "f(2x)",
                type: "II",
                procedure: [
                    "Esto es una transformaci√≥n TIPO II (afecta a x)",
                    "Paso 1: Necesitamos que 2x = -4",
                    "Paso 2: Resolver para x ‚Üí x = -4 / 2 = -2",
                    "Paso 3: La y NO cambia ‚Üí y = 3",
                    "Resultado: (-2, 3)"
                ],
                correctAnswer: "(-2, 3)",
                options: ["(-2, 3)", "(-8, 3)", "(-4, 6)"],
                explanation: "f(2x) comprime horizontalmente. Si 2x = -4, entonces x = -2."
            },
            {
                startPoint: { x: 2, y: -5 },
                transformation: "4f(x + 1) - 2",
                type: "Mixto",
                procedure: [
                    "Esta es una transformaci√≥n MIXTA (afecta tanto a x como a y)",
                    "Paso 1 (Tipo II): Para f(x + 1), necesitamos x + 1 = 2",
                    "Paso 2: Resolver para x ‚Üí x = 2 - 1 = 1",
                    "Paso 3 (Tipo I): Tomar y = -5 y multiplicar por 4 ‚Üí 4 ¬∑ (-5) = -20",
                    "Paso 4: Restar 2 ‚Üí -20 - 2 = -22",
                    "Resultado: (1, -22)"
                ],
                correctAnswer: "(1, -22)",
                options: ["(1, -22)", "(3, -22)", "(1, -18)"],
                explanation: "Primero resolvemos la transformaci√≥n dentro de f (afecta a x), luego aplicamos las operaciones fuera de f (afectan a y)."
            }
        ];

        let currentProblem = 0;
        let correctCount = 0;
        let incorrectCount = 0;
        let answered = false;

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function loadProblem() {
            answered = false;
            const problem = problems[currentProblem];
            const shuffledOptions = shuffleArray(problem.options);

            const html = `
                <div class="problem-container">
                    <div class="starting-point">
                        üìç Punto de partida: f(${problem.startPoint.x}) = ${problem.startPoint.y}
                        <br>
                        Es decir, el punto (${problem.startPoint.x}, ${problem.startPoint.y}) est√° en la gr√°fica
                    </div>

                    <div class="transformation">
                        Encuentra el punto transformado para: ${problem.transformation}
                    </div>

                    <div class="explanation-toggle" onclick="toggleExplanation()">
                        üí° ¬øQu√© tipo de transformaci√≥n es? (Click para ver)
                        <div class="explanation-content" id="explanationContent">
                            <strong>Tipo ${problem.type}:</strong> ${problem.explanation}
                        </div>
                    </div>

                    <div class="procedure" id="procedureBox">
                        <h3>üìù Procedimiento paso a paso:</h3>
                        ${problem.procedure.map((step, index) => `
                            <div class="step">${step}</div>
                        `).join('')}
                    </div>

                    <h3 style="text-align: center; margin: 20px 0; color: #667eea;">
                        Selecciona la respuesta correcta:
                    </h3>

                    <div class="options">
                        ${shuffledOptions.map((option, index) => `
                            <button class="option-btn" onclick="checkAnswer('${option}')">${option}</button>
                        `).join('')}
                    </div>

                    <div class="feedback" id="feedback"></div>

                    <button class="next-btn" id="nextBtn" onclick="nextProblem()" style="display: none;">
                        Siguiente Problema ‚Üí
                    </button>
                </div>
            `;

            document.getElementById('problemArea').innerHTML = html;
        }

        function toggleExplanation() {
            const content = document.getElementById('explanationContent');
            content.classList.toggle('show');
        }

        function checkAnswer(selected) {
            if (answered) return;

            answered = true;
            const problem = problems[currentProblem];
            const feedback = document.getElementById('feedback');
            const buttons = document.querySelectorAll('.option-btn');

            buttons.forEach(btn => {
                btn.style.pointerEvents = 'none';
                if (btn.textContent === problem.correctAnswer) {
                    btn.classList.add('correct');
                } else if (btn.textContent === selected) {
                    btn.classList.add('incorrect');
                }
            });

            // MOSTRAR PROCEDIMIENTO SOLO DESPU√âS DE RESPONDER
            const procedureBox = document.getElementById('procedureBox');
            if (procedureBox) procedureBox.classList.add('show');

            if (selected === problem.correctAnswer) {
                correctCount++;
                feedback.className = 'feedback correct show';
                feedback.innerHTML = `
                    <strong>‚úÖ ¬°Correcto!</strong><br>
                    El punto transformado es ${problem.correctAnswer}.<br>
                    <em>${problem.explanation}</em>
                `;
            } else {
                incorrectCount++;
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = `
                    <strong>‚ùå Incorrecto</strong><br>
                    Seleccionaste: ${selected}<br>
                    La respuesta correcta es: ${problem.correctAnswer}<br>
                    <em>Ahora tienes el procedimiento paso a paso arriba para entender el proceso.</em>
                `;
            }

            document.getElementById('nextBtn').style.display = 'block';
            updateStats();
        }

        function updateStats() {
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('incorrectCount').textContent = incorrectCount;
            document.getElementById('totalCount').textContent = correctCount + incorrectCount;
        }

        function nextProblem() {
            currentProblem++;
            if (currentProblem >= problems.length) {
                showFinalResults();
            } else {
                loadProblem();
            }
        }

        function showFinalResults() {
            const percentage = Math.round((correctCount / (correctCount + incorrectCount)) * 100);
            let message = '';

            if (percentage >= 90) {
                message = 'üåü ¬°Excelente trabajo! Dominas las transformaciones.';
            } else if (percentage >= 70) {
                message = 'üëç ¬°Bien hecho! Tienes un buen entendimiento.';
            } else if (percentage >= 50) {
                message = 'üìö Buen esfuerzo. Sigue practicando para mejorar.';
            } else {
                message = 'üí™ No te rindas. Revisa los conceptos y vuelve a intentarlo.';
            }

            document.getElementById('problemArea').innerHTML = `
                <div class="problem-container" style="text-align: center;">
                    <h2 style="color: #667eea; margin-bottom: 30px;">üéâ ¬°Has completado todos los problemas!</h2>
                    <div style="font-size: 4em; margin: 30px 0;">${percentage}%</div>
                    <h3 style="color: #764ba2; margin: 20px 0;">${message}</h3>
                    <div style="margin: 30px 0; font-size: 1.2em;">
                        <p>Respuestas correctas: <strong style="color: #4caf50;">${correctCount}</strong></p>
                        <p>Respuestas incorrectas: <strong style="color: #f44336;">${incorrectCount}</strong></p>
                    </div>
                    <button class="next-btn" onclick="location.reload()">
                        üîÑ Volver a Empezar
                    </button>
                </div>
            `;
        }

        loadProblem();
    </script>
</body>
</html>
